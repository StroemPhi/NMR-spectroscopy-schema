###########################################################
#   schema header
###########################################################
id: https://git.tib.eu/lab-linked-scientific-knowledge/nmr-research-data-semantification/-/blob/main/nmr_assay_schema.yaml
title: DRAFT:NMR spectroscopy schema (NMRspec)
name: NMR-spectroscopy-schema
description: |-
  This model is to be used to semantify NMR spectroscopy research data.
license: https://creativecommons.org/licenses/by/4.0/
version: 0.0.1

prefixes:
  NMRspec: https://nfdi4chem/nmr/data/
  linkml: https://w3id.org/linkml/
  sdo: https://schema.org/
  bfo: http://purl.obolibrary.org/obo/BFO_
  chmo: http://purl.obolibrary.org/obo/CHMO_
  nmrCV: http://nmrML.org/nmrCV#
  chebi: http://purl.obolibrary.org/obo/CHEBI_
  cheminf: http://purl.obolibrary.org/obo/CHEMINF_
  ro: http://purl.obolibrary.org/obo/RO_
  iao: http://purl.obolibrary.org/obo/IAO_
  obi: http://purl.obolibrary.org/obo/OBI_
  pato: http://purl.obolibrary.org/obo/PATO_
  prov: http://www.w3.org/ns/prov#
  om: http://www.ontology-of-units-of-measure.org/resource/om-2/
# data prefixes
  doi: https://doi.org/
  chemotion: https://chemotion.de/
  pubchem: https://pubchem.com/
# other NMR schema prefixes for mapping/interoperability purposes
  jdx: http://www.jcamp-dx.org/protocols/dxnmr01.pdf/
  isa: https://isa-specs.readthedocs.io/en/latest/isamodel.html#
  FAIRspec: https://github.com/IUPAC/IUPAC-FAIRSpec/blob/main/src/main/java/org/iupac/fairspec/core/

default_prefix: NMRspec
default_curi_maps:
 - semweb_context

imports:
 - linkml:types

#################################################
classes:
#################################################
# Mixins
  ProvenanceData:
    mixin: true
    description: >-
      This is a mixin to be used by any class that is needed as part of an audit trail to ensure the provenance of the metadata.
    attributes:       
      source:
        description: >-
          This field can be used to provide the source of the data as String. E.g.
        range: string
      source_uri:
        range: uriorcurie
      date_retrieved:
        range: datetime
    todos: # defined with PROVO or other adequate slot_uris
# Processes
  PulsedNmrAssay:
    class_uri: chmo:0000613
    slots:
      - id
      - name
      - assay_date
      - pulse_program
      - has_dimension
      - acuisition_nucleus
      - sample
      - solvent
      - spectrometer
# Material Entities
  NmrSample:
    slots:
      - id
      - name
      - local_id
      - formula   
  NmrSolvent:
    slots:
      - id
      - formula
      - name
  NmrSpectrometer:
    slots:
      - id
      - manufacturered_by
      - type
    slot_usage:  
      manufacturered_by:
        inlined: true
        range: Manufacturer
      type:
        range: string
        todos: >-
          make the range an enum with allowed values from ontology, see also: https://github.com/StroemPhi/NMR-spectroscopy-schema/issues/2
    close_mappings:
      - obi:0000566
      - nmrCV:1400059
      - chmo:0001807
  Manufacturer:
    class_uri: obi:0000835
    close_mappings:
      - nmrCV:1400255
    slots:
      - name
      - website
    slot_usage:
      name: 
        range: NmrManufacturers

# Information Content Entities
  NmrSpecRecord:
    description: >-
      This is the tree root node of the schema. It is a data item that serves as a container for all relevant information about one NMR spectroscopy assay record. The properties of this class represent the required metadata of an NMR assay, such as: 
      * what kind of assay was performed (e.g. 2D 13C COSY) and what devices where used for that (e.g. spectrometer, magnet, solvent, buffer, ...)
      * what are the detail infos of the assayed sample (name, formula, structure, concentration, preperation process, ...)
    tree_root: true
    mixins:
      - ProvenanceData
    slots:
      - id
      - output_of_nmr_assay
    slot_usage:
      output_of_nmr_assay:
        inlined: true
        required: true
        range: PulsedNmrAssay

#################################################
slots:
#################################################
# common slots
  id:
    identifier: true
  formula:
    recommended: true
    range: string
  name:
    recommended: true
    range: string
  website:
    required: false
    range: uri
  type:
# NmrSpecRecord
  output_of_nmr_assay:
    required: true
    slot_uri: obi:0000312
# PulsedNmrAssay
  assay_date:
    range: datetime
  sample:
    slot_uri: obi:0000293
    inlined: true
    required: true
    domain: PulsedNmrAssay
    range: NmrSample
  solvent:
    slot_uri: obi:0000293
    inlined: true
    required: true
    domain: PulsedNmrAssay
    range: NmrSolvent
  spectrometer:
    slot_uri: obi:0000293
    inlined: true
    required: true
    domain: PulsedNmrAssay
    range: NmrSpectrometer
  has_dimension:
    required: true
    range: Dimension
  pulse_program:
    required: true
    range: PulseProgram
  acuisition_nucleus:
    required: true
    multivalued: true
    inlined_as_list: true
    description: this is the aqu.nucleus nto be assayed as specified by the protocol
    todos: We need to model this probably as class, if we want to properly refer to it in the sample, solvent and buffer. For now xsd:string must suffice.
    range: string
# sample
  local_id:
    recommended: true
    range: string
# Instrument  
  manufacturered_by:

#################################################
enums:
  PulseProgram:
    permissible_values:
      NMR:
      COSY:
      COSY-DQF:
      DOSY:
      SECSY:
      RELAY:
      TOCSY:
      ROESY:
      NOESY:
      Double-Quantum:
      J-Resolved:
      DEPT & INEPT:
      HECTOR:
      COLOC:
      Heteronuclear J-resolved:
      HOESY:
      INADEQUATE:
      Inverse 1H-NMR:
      HMQC:
      DEPT-HMQC:
      Multiplicity-edited HSQC:
      CT-HSQC:
      CT-HMBC:
      Inverse-INEPT:
      2D HSQC-α,β:
      2D IPAP-HSQC:
      2D J-modulated CT-HSQC:
      TROSY:
      CRINEPT:
      HMQC-COSY:
      H2BC:
      HQMC-TOSCY:
      HMQC-ROESY:
      HMQC-NOESY:
      HSQC-TOSCY:
      HSQC-ROESY:
      HSQC-NOESY:
      HMBC:
      Phase-sensitive HMBC:
      J-HMBC:
      Long-range HSQC (HSQMBC):
      EXSIDE:
      HETLOC:
      HSQC-HECADE:
      ADEQUATE:
      1,1-ADEQUATE:
      1,n-ADEQUATE:
      n,1-ADEQUATE:
      n,n-ADEQUATE:
      STE:
      STEBP:
      STD-TOSCY:
      STD-NOESY:
      STD-HSQC:
      CLEANEX:
      CLEANEX-HSQC:
      CLEANEX-TROSY:
      DSTE:
      DSTEBP:
      COSY-DOSY:
      DOSY-TOCSY:
      DOSY-NOESY:
      DOSY-HMQC:
  NmrManufacturers:
    notes: allowed values from nmrCV_1400255
    permissible_values:
      Acorn NMR Inc:
      Agilent Technologies:
      Applied Biosystems:
      Bruker:
      Doty Scientific:
      FOSS:
      General Electric:
      JEOL:
      JS Research:
      Jasco:
      Kimble Chase:
      MR Resources:
      OceanOptics:
      Oxford Instruments:
      Perkin Elmer:
      Phillips:
      Siemens AG:
      Spinlock SRL:
      TX:
      ThermoFinnigan:
      ThermoMattson:
      ThermoNicolet:
      Varian:
      Waters:
      Wilmad:
      acdlabs:
      micromass:
      tecmag:
  Dimension:
    permissible_values:
      1D:
      2D:
      3D:
      4D:
#################################################

