###########################################################
#   schema header
###########################################################
id: https://git.tib.eu/lab-linked-scientific-knowledge/nmr-research-data-semantification/-/blob/main/nmr_assay_schema.yaml
title: DRAFT:NMR spectroscopy schema (NMRspec)
name: NMR-spectroscopy-schema
description: |-
  This model is to be used to semantify NMR spectroscopy research data.
license: https://creativecommons.org/licenses/by/4.0/
version: 0.0.1

prefixes:
  NMRspec: https://nfdi4chem/nmr/data/
  linkml: https://w3id.org/linkml/
  sdo: https://schema.org/
  bfo: http://purl.obolibrary.org/obo/BFO_
  chmo: http://purl.obolibrary.org/obo/CHMO_
  nmrCV: http://nmrML.org/nmrCV#
  chebi: http://purl.obolibrary.org/obo/CHEBI_
  cheminf: http://purl.obolibrary.org/obo/CHEMINF_
  ro: http://purl.obolibrary.org/obo/RO_
  iao: http://purl.obolibrary.org/obo/IAO_
  obi: http://purl.obolibrary.org/obo/OBI_
  pato: http://purl.obolibrary.org/obo/PATO_
  prov: http://www.w3.org/ns/prov#
  isa: https://isa-specs.readthedocs.io/en/latest/isamodel.html#
  iupac: https://github.com/IUPAC/IUPAC-FAIRSpec/blob/main/src/main/java/org/iupac/fairspec/core/
  doi: https://doi.org/
  chemotion: https://chemotion.de/
  pubchem: https://pubchem.com/


default_prefix: NMRspec
default_curi_maps:
 - semweb_context

imports:
 - linkml:types

#################################################
classes:
#################################################
# Mixins
  ProvenanceData:
    mixin: true
    description: >-
      This is a mixin to be used by any class that is needed as part of an audit trail to ensure the provenance of the metadata.
    attributes:       
      source:
        description: >-
          This field can be used to provide the source of the data as String. E.g.
        range: string
      source_uri:
        range: uriorcurie
      date_retrieved:
        range: datetime
    todos: # defined with PROVO or other adequate slot_uris
# Processes
  PulsedNmrAssay:
    class_uri: chmo:0000613
    attributes:
      sample:
        slot_uri: obi:0000293
        inlined: true
        required: true
        domain: PulsedNmrAssay
        range: NmrSample
      solvent:
        slot_uri: obi:0000293
        inlined: true
        required: true
        domain: PulsedNmrAssay
        range: NmrSolvent
      spectrometer:
        slot_uri: obi:0000293
        inlined: true
        required: true
        domain: PulsedNmrAssay
        range: NmrSpectrometer
      type:
        required: true
        range: NmrAssayType

# Material Entities      
  NmrSample:
    slots:
      - name
      - local_id
      - formula   
  NmrSolvent:
    slots:
      - id
      - formula
      - name

  NmrSpectrometer:
    slots:
      - manufacturered_by
    slot_usage:  
      manufacturered_by:
        inlined: true
        range: NmrManufacturer
      type:
        range: string
        todos: >-
          make the range an enum with allowed values from ontology, see also: https://github.com/StroemPhi/NMR-spectroscopy-schema/issues/2

  NmrManufacturer:
    class_uri: obi:0000835
    close_mappings:
      - nmrCV:1400255
    slot_usage:
      type: 
        range: NmrManufacturers

# Information Content Entities
  NmrSpecRecord:
    tree_root: true
    mixins:
      - ProvenanceData
    description: >-
      A data item that is an NMR assay output which represents the data produced by an NMR assay of a studied sample compound.
    slots:
      - id
      - output_of_nmr_assay
    slot_usage:
      output_of_nmr_assay:
        required: true
        range: PulsedNmrAssay


#################################################
slots:
#################################################
# common slots
  id:
    identifier: true
    slot_uri: sdo:identifier
  formula:
    recommended: true
    range: string
  name:
    recommended: true
    range: string
# NmrSpecRecord
  output_of_nmr_assay:
    required: true
    slot_uri: obi:0000312
# sample
  local_id:
    recommended: true
    range: string
# Instrument  
  manufacturered_by:

#################################################
enums:
  NmrAssayType:
    permissible_values:
      1D-1H-NMR:
        meaning: chmo:0002442
      2DJ-DOSY:
        meaning: chmo:0001953
      3D-COSY-DOSY:
        meaning: chmo:0001951
      3D-DOSY-TOCSY:
        meaning: chmo:0001950
      3D-DOSY-HMQC:
        meaning: chmo:0001952
    todos: >-
      We need to figure out, if we need to specify this via dimension (1D-4D) and pulse sequence (e.g. COSY, NOSY, ...)
  NmrManufacturers:
    notes: allowed values from nmrCV_1400255
    permissible_values:
      Acorn NMR Inc:
      Agilent Technologies:
      Applied Biosystems:
      Bruker:
      Doty Scientific:
      FOSS:
      General Electric:
      JEOL:
      JS Research:
      Jasco:
      Kimble Chase:
      MR Resources:
      OceanOptics:
      Oxford Instruments:
      Perkin Elmer:
      Phillips:
      Siemens AG:
      Spinlock SRL:
      TX:
      ThermoFinnigan:
      ThermoMattson:
      ThermoNicolet:
      Varian:
      Waters:
      Wilmad:
      acdlabs:
      micromass:
      tecmag:
#################################################

