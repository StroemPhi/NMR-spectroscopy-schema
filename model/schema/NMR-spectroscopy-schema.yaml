###########################################################
#   schema header
###########################################################
id: https://git.tib.eu/lab-linked-scientific-knowledge/nmr-research-data-semantification/-/blob/main/nmr_assay_schema.yaml
title: DRAFT:NMR spectroscopy schema (NMRspec)
name: NMR-spectroscopy-schema
description: |-
  This model is to be used to semantify NMR spectroscopy research data.
license: https://creativecommons.org/licenses/by/4.0/
version: 0.0.1

prefixes:
  NMRspec: https://nfdi4chem/nmr/data/
  linkml: https://w3id.org/linkml/
  sdo: https://schema.org/
  bfo: http://purl.obolibrary.org/obo/BFO_
  chmo: http://purl.obolibrary.org/obo/CHMO_
  nmrCV: http://nmrML.org/nmrCV#
  chebi: http://purl.obolibrary.org/obo/CHEBI_
  cheminf: http://purl.obolibrary.org/obo/CHEMINF_
  ro: http://purl.obolibrary.org/obo/RO_
  iao: http://purl.obolibrary.org/obo/IAO_
  obi: http://purl.obolibrary.org/obo/OBI_
  pato: http://purl.obolibrary.org/obo/PATO_
  prov: http://www.w3.org/ns/prov#
  isa: https://isa-specs.readthedocs.io/en/latest/isamodel.html#
  iupac: https://github.com/IUPAC/IUPAC-FAIRSpec/blob/main/src/main/java/org/iupac/fairspec/core/
  doi: https://doi.org/
  chemotion: https://chemotion.de/

default_prefix: NMRspec
default_curi_maps:
 - semweb_context

imports:
 - linkml:types

emit_prefixes:
  - sdo
  - doi
  - chebi

#################################################
classes:
#################################################
# Mixins
  HasProvenanceData:
    mixin: true
    description: >-
      This is a mixin to be used by any class that is needed as part of an audit trail to ensure the provenance of the metadata.
    attributes:       # TODO these need to be defined properly
      source:
        description: >-
          This field can be used to provide the source of the data as String. E.g.
        range: string
      source_uri:
        range: uriorcurie
      date_retrieved:
        range: datetime
# Processes
  PulsedNmrAssay:
    class_uri: chmo:0000613
    attributes:
      has_specified_input:
        required: true
        range: NmrAssayInput
      type:
        required: true
        range: NmrAssayType

# Material Entities
  NmrAssayInput:
    attributes:
      sample:
        required: true
        range: NmrSample
      buffer:
        required: true
        range: NmrBuffer
    todos: find out how to use "union_of" slot in linkML to provide multiple classes as ranges of a property such as obi:has_specific_input instead of this container solution

# Information Content Entities
  NmrSpecRecord:
    tree_root: true
    mixins:
      - HasProvenanceData
    description: >-
      A data item that is an NMR assay output which represents the data produced by an NMR assay of a studied sample compound.
    slots:
      - id
      - is_specified_output_of
    slot_usage:
      is_specified_output_of:
        required: true
        range: PulsedNmrAssay

  NmrSample:
    slots:
      - local_id
      - name
      - formula
      
  NmrBuffer:
    slots:
#      - id 
      - name
      - formula
#    id_prefixes:
#      - chebi
      #- pubchem
      #- cas"

#################################################
slots:
#################################################
# common metadata
  id:
    identifier: true
    slot_uri: sdo:identifier
  formula:
    recommended: true
    range: string
  name:
    recommended: true
    range: string
# nmr assay metadata
  sample:
    inlined: true
    required: true
    domain: PulsedNmrAssay
    range: NmrSample
  buffer:
    inlined: true
    required: true
    domain: PulsedNmrAssay
    range: NmrBuffer
# nmr record metadata
  is_specified_output_of:
    required: true
    slot_uri: obi:0000312
# sample metadata
  local_id:
    recommended: true
    range: string

#################################################
enums:
  NmrAssayType:
    permissible_values:
      1D-1H-NMR:
        meaning: chmo:0002442
      2DJ-DOSY:
        meaning: chmo:0001953
      3D-COSY-DOSY:
        meaning: chmo:0001951
      3D-DOSY-TOCSY:
        meaning: chmo:0001950
      3D-DOSY-HMQC:
        meaning: chmo:0001952
#################################################

